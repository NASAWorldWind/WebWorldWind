OpenSearch (http://docs.opengeospatial.org/is/13-026r8/13-026r8.html) offers a collection of formats for sharing search results. The OpenSearch Geo extension provides a standard mechanism to query a resource based on geographic extents. With this extension, geospatial results are based on the GeoRSS standard and can be displayed automatically on a virtual globe. Other formats are also supported or will be such as KML and GeoJSON responses.

# Basic Workflow

Interacting with an OpenSearch endpoint usually starts with requesting a description of its capabilities called a description document. This phase is very similar to the GetCapabilities of WMS or WCS for example. For this reason, the proposed API is similar to the new one for WCS.

With the description document, the client can discover the search criteria and extensions available for this endpoint. The description document, the search requests and the search responses are standardised, but depend on the available extensions.

```javascript
OpenSearchService.create(productsSearchUrl).then(function (service) {
    return service.search({
    
    });
}).then(function (products) { 
    var layer = new RenderableLayer("OpenSearch Products");
    new GeoJSONParser(products).load(null, shapeConfigurationCallback, layer);
    wwd.addLayer(layer);
}).catch(function (error) {
    // Handle error
});
```

# Two-Step Workflow

A typical geospatial result is the products generated by earth observation satellites. The workflow for searching earth observation products usually includes two steps: one to discover the collections of products and one to search for the actual products within a particular collection.

```javascript
OpenSearchService.create(colSearchUrl).then(function (step1service) {
    return step1service.search({
    
    });
}).then(function (collections) {
    var prodSearchUrl = collections.findFirstSearchUrl(filter);
    return OpenSearchService.create(prodSearchUrl);
}).then(function (step2service) {
    return step2service.search({
    
    });
}).then(function (products) { 
    var layer = new RenderableLayer("OpenSearch Products");
    new GeoJSONParser(products).load(null, shapeConfigurationCallback, layer);
    wwd.addLayer(layer);
}).catch(function (error) {
    // Handle error
});
```

# OpenSearchService API

```
class OpenSearchService {
  // Creates an instance of the service by loading the description document
  static create(descriptionDocumentUrl): Promise<OpenSearchService>
  // Parsed description document as loaded by the create method
  descriptionDocument: OpenSearchDescriptionDocument
  // Raw description document as loaded by the create method
  rawDescriptionDocument: XMLDocument
  // Performs a search using this service and the specified parameters
  search(parameters): Promise<OpenSearchResponse>
}
```

## OpenSearchDescriptionDocument API

```
class OpenSearchDescriptionDocument {
  // Returns the first search URL matching the filter
  findFirstSearchUrl(filter): OpenSearchUrl
  // Indicates whether a particular extension is supported, e.g.
  // geo, time and parameters
  hasExtension(extension): Boolean
  // Accessors for all standard elements, see current implementation
}
```

## OpenSearchResponse API

```
class OpenSearchResponse {
  // Simple JavaScript object exposing the content of the response
  // See the current implementation
}
```
